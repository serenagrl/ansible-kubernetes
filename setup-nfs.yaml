# Author: Serena Yeoh
#
# Disclaimer:
# This playbook was written based on my self-learning and may not follow certain
# best practices or work properly in your environment. Use it at your own risk.
#

# Pre-requisite for the csi-nfs. 
# You should dedicate 1 server outside the kubernetes cluster to serve as an NFS server.
- name: Setup the NFS Server
  hosts: nfs_server
  gather_facts: no

  roles:
    # Uncomment to provision the nfs server.    
    # - role: vm-ubuntu
    #   vm:
    #     specs:
    #       ram_size: 4GB
    #       min_ram_size: 4GB
    #       disk_size: 127GB
    #       v_cpu: 2

    # Configure servers that are allowed to access the NFS share
    - role: nfs/server