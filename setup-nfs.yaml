# Pre-requisite for the csi-nfs. 
# You should dedicate 1 server outside the kubernetes cluster to serve as an NFS server.
- name: Setup the NFS Server
  hosts: nfs_server
  gather_facts: no

  roles:
    # Uncomment to provision the nfs server.    
    # - role: vm-ubuntu
    #   specs:
    #     ram_size: 4GB
    #     min_ram_size: 4GB
    #     disk_size: 127GB
    #     v_cpu: 2

    # Configure servers that are allowed to access the NFS share
    - role: nfs-server
      share_to: kubernetes_control_planes

# Pre-requisite for the csi-nfs. 
# Install the nfs package on clients.
- name: Setup NFS clients
  hosts: kubernetes_cluster
  gather_facts: no

  roles:
    - role: nfs-client


