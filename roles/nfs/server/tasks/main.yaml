# Author: Serena Yeoh
#
# Disclaimer:
# This playbook was written based on my self-learning and may not follow certain
# best practices or work properly in your environment. Use it at your own risk.
#
- name: Install NFS server
  ansible.builtin.include_tasks: "{{ ansible_os_family | lower }}/install-nfs.yaml"

- name: Create shared directory
  ansible.builtin.file:
    path: "{{ nfs.shared }}"
    state: directory
    mode: '0777'

- name: Enable nfs
  ansible.builtin.shell: |
    sudo systemctl enable --now nfs-server
    sudo systemctl start nfs-server
    sudo exportfs -ar

