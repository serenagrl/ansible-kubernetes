# Author: Serena Yeoh
# Co-Author: Jaryl Lan
#
# Disclaimer:
# This playbook was written based on my self-learning and may not follow certain
# best practices or work properly in your environment. Use it at your own risk.
#

- name: Get rabbitmq cluster
  kubernetes.core.k8s_info:
    api_version: rabbitmq.com/v1beta1
    kind: RabbitmqCluster
    name: rabbitmq
    namespace: rabbitmq
  register: rabbitmq_result

- ansible.builtin.set_fact:
    fact_has_rabbitmq: "{{ rabbitmq_result.resources | length > 0 }}"