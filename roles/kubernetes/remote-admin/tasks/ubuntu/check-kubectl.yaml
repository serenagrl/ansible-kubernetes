# Author: Serena Yeoh
# Co-Author: Jaryl Lan
#
# Disclaimer:
# This playbook was written based on my self-learning and may not follow certain
# best practices or work properly in your environment. Use it at your own risk.
#

- name: Install krew
  delegate_to: localhost
  become_user: root
  block:
    - name: Check if kubectl is installed
      ansible.builtin.shell: apt list kubectl --installed
      register: kubectl_result

    - name: Install krew
      ansible.builtin.include_tasks: install-krew.yaml
      when: (kubectl_result.stdout_lines | select('search', 'installed') | length > 0) | bool 