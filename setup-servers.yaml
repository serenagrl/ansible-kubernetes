- name: Provision Virtual Machines
  hosts: kubernetes_cluster
  gather_facts: no

  pre_tasks:
    - import_tasks: ./tasks/task-create-working-directory.yaml

  roles:
    - vm-ubuntu

  # Create checkpoints for safety reasons. You can delete the checkpoints later.
  post_tasks:
    - import_tasks: ./tasks/task-checkpoint-vm.yaml
      vars:
        checkpoint_name: "Ubuntu configured."
      when: _checkpoint
